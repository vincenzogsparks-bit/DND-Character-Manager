<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D&D Character Sheet</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="./style.css">
</head>

<body class="bg-gray-900 text-gray-200">

    <div id="splash-screen">
        <div id="splash-placeholder">
            <svg id="splash-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 22s-8-4-8-12V4l8-2 8 2v6c0 8-8 12-8 12z"></path>
                <path d="M14 9l-4 4-2-2"></path>
                <path d="M16 16l-3-3 3-3z"></path>
                <path d="M8 8l3 3-3 3z"></path>
            </svg>
        </div>
        <h1 id="splash-text">The Runes call, Thangrim!</h1>
    </div>

    <div id="main-content" class="min-h-screen p-4 sm:p-8">

        <div class="max-w-7xl mx-auto">

            <div id="page-container" class="mb-6">

                <div id="page-main" class="page-content space-y-6">

                    <header
                        class="flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0">
                        <div class="flex items-center space-x-4">
                            <div id="character-portrait-container">
                                <img id="character-portrait" src="" alt="Character Portrait">
                            </div>
                            <div>
                                <h1 class="text-4xl font-bold text-yellow-400">Thangrim Ironfist</h1>
                                <div class="flex items-center space-x-3 text-lg text-gray-400 mt-1">
                                    <span>Male Mountain Dwarf</span>
                                    <span class="text-gray-600">|</span>
                                    <span>Fighter 4</span>
                                </div>
                            </div>
                        </div>

                        <div class="flex items-center space-x-4 w-full sm:w-auto">
                            <div class="bg-gray-800 rounded-lg p-4 shadow-lg border border-gray-700 w-24 text-center flex-shrink-0">
                                <div class="text-sm font-medium uppercase text-gray-400">AC</div>
                                <div id="ac-display" class="text-3xl font-bold text-yellow-400 mt-1">10</div>
                            </div>
                            
                            <div class="bg-gray-800 rounded-lg p-4 shadow-lg border border-gray-700 flex-grow">
                                <div class="text-sm font-medium uppercase text-gray-400">Health</div>
                                
                                <div class="flex items-center justify-between space-x-2 mt-1">
                                    <div class="flex items-baseline space-x-2">
                                        <input type="number" id="current-hp" class="hp-input" value="34">
                                        <span class="text-xl text-gray-400">/</span>
                                        <span id="max-hp" class="text-xl text-gray-400">34</span>
                                    </div>
                                    <div class="flex space-x-2 items-center">
                                        <button id="hp-minus-button" class="hp-mod-button" title="Decrease HP by 1">-</button>
                                        <button id="hp-plus-button" class="hp-mod-button" title="Increase HP by 1">+</button>
                                    </div>
                                </div>
                                
                                <div class="flex items-center justify-between space-x-2 mt-2 pt-2 border-t border-gray-700">
                                    <label for="temp-hp" class="text-sm font-semibold text-gray-400">Temp HP</label>
                                    <input type="number" id="temp-hp" class="temp-hp-input" value="0">
                                </div>
                            </div>
                            
                            <div class="flex flex-col space-y-2">
                                <button id="long-rest-button"
                                    class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg shadow-md transition duration-200 flex-shrink-0 whitespace-nowrap">
                                    Long Rest
                                </button>
                                <button id="short-rest-button"
                                    class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-lg shadow-md transition duration-200 flex-shrink-0 whitespace-nowrap">
                                    Short Rest
                                </button>
                            </div>
                        </div>
                    </header>
                    
                    <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4">
                        <div class="stat-block rounded-lg p-4 text-center">
                            <div class="modifier">+5</div>
                            <div class="score">20</div>
                            <div class="label mt-1">Strength</div>
                        </div>
                        <div class="stat-block rounded-lg p-4 text-center">
                            <div class="modifier">+0</div>
                            <div class="score">11</div>
                            <div class="label mt-1">Dexterity</div>
                        </div>
                        <div class="stat-block rounded-lg p-4 text-center">
                            <div class="modifier">+2</div>
                            <div class="score">14</div>
                            <div class="label mt-1">Constitution</div>
                        </div>
                        <div class="stat-block rounded-lg p-4 text-center">
                            <div class="modifier">+1</div>
                            <div class="score">12</div>
                            <div class="label mt-1">Intelligence</div>
                        </div>
                        <div class="stat-block rounded-lg p-4 text-center">
                            <div class="modifier">+0</div>
                            <div class="score">11</div>
                            <div class="label mt-1">Wisdom</div>
                        </div>
                        <div class="stat-block rounded-lg p-4 text-center">
                            <div class="modifier">-1</div>
                            <div class="score">9</div>
                            <div class="label mt-1">Charisma</div>
                        </div>

                        <div
                            class="prof-speed-block rounded-lg p-4 text-center flex flex-col justify-center">
                            <div class="text-2xl font-bold text-yellow-400">+2</div>
                            <div class="text-sm font-semibold uppercase mt-1">Proficiency Bonus</div>
                        </div>

                        <div
                            class="prof-speed-block rounded-lg p-4 text-center flex flex-col justify-center">
                            <div class="text-2xl font-bold">25 <span class="text-base">ft.</span></div>
                            <div class="text-sm font-semibold uppercase mt-1">Walking Speed</div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

                        <div class="bg-gray-800 rounded-lg p-6 shadow-lg border border-gray-700">
                            <div class="flex justify-between items-center border-b border-gray-700 pb-3 mb-4">
                                <h2 class="text-2xl font-bold text-yellow-400">Saving Throws</h2>
                                <div id="save-roll-display" class="bg-gray-900 border border-gray-700 rounded-md px-4 py-2 text-sm text-yellow-300 font-mono">
                                    Roll Result
                                </div>
                            </div>
                            <ul class="space-y-2">
                                <li class="save-item proficient save-rollable flex justify-between items-center p-3 rounded-lg" data-save-name="Strength Save" data-modifier="7" data-stat="STR">
                                    <span class="font-bold"><span class="mod mr-2">(STR)</span> Strength</span>
                                    <span class="bonus" id="str-save-bonus">+7</span>
                                </li>
                                <li class="save-item save-rollable flex justify-between items-center p-3 rounded-lg" data-save-name="Dexterity Save" data-modifier="0" data-stat="DEX">
                                    <span class="font-bold"><span class="mod mr-2">(DEX)</span> Dexterity</span>
                                    <span class="bonus" id="dex-save-bonus">+0</span>
                                </li>
                                <li class="save-item proficient save-rollable flex justify-between items-center p-3 rounded-lg" data-save-name="Constitution Save" data-modifier="4" data-stat="CON">
                                    <span class="font-bold"><span class="mod mr-2">(CON)</span>
                                        Constitution</span>
                                    <span class="bonus" id="con-save-bonus">+4</span>
                                </li>
                                <li class="save-item save-rollable flex justify-between items-center p-3 rounded-lg" data-save-name="Intelligence Save" data-modifier="1" data-stat="INT">
                                    <span class="font-bold"><span class="mod mr-2">(INT)</span>
                                        Intelligence</span>
                                    <span class="bonus" id="int-save-bonus">+1</span>
                                </li>
                                <li class="save-item save-rollable flex justify-between items-center p-3 rounded-lg" data-save-name="Wisdom Save" data-modifier="0" data-stat="WIS">
                                    <span class="font-bold"><span class="mod mr-2">(WIS)</span> Wisdom</span>
                                    <span class="bonus" id="wis-save-bonus">+0</span>
                                </li>
                                <li class="save-item save-rollable flex justify-between items-center p-3 rounded-lg" data-save-name="Charisma Save" data-modifier="-1" data-stat="CHA">
                                    <span class="font-bold"><span class="mod mr-2">(CHA)</span> Charisma</span>
                                    <span class="bonus" id="cha-save-bonus">-1</span>
                                </li>
                            </ul>
                        </div>

                        <div
                            class="bg-gray-800 rounded-lg p-6 shadow-lg border border-gray-700 space-y-4">
                            <h2
                                class="text-2xl font-bold text-yellow-400 border-b border-gray-700 pb-3 mb-4">
                                Senses
                            </h2>
                            <div class="sense-item p-4 rounded-lg text-center">
                                <div class="text-3xl font-bold text-yellow-400">12</div>
                                <div class="text-sm font-semibold uppercase mt-1">Passive Perception</div>
                            </div>
                            <div class="sense-item p-4 rounded-lg text-center">
                                <div class="text-3xl font-bold">11</div>
                                <div class="text-sm font-semibold uppercase mt-1">Passive Investigation</div>
                            </div>
                            <div class="sense-item p-4 rounded-lg text-center">
                                <div class="text-3xl font-bold">12</div>
                                <div class="text-sm font-semibold uppercase mt-1">Passive Insight</div>
                            </div>
                            <div class="text-center text-gray-400">Darkvision 60 ft.</div>
                        </div>

                        <div
                            class="bg-gray-800 rounded-lg p-6 shadow-lg border border-gray-700">
                            <h2
                                class="text-2xl font-bold text-yellow-400 border-b border-gray-700 pb-3 mb-4">
                                Proficiencies & Languages</h2>
                            <div class="space-y-4">
                                <div>
                                    <h3 class="font-semibold text-gray-400 uppercase text-sm">Armor</h3>
                                    <p class="text-white">Chain Mail, Heavy Armor, Light Armor, Medium Armor,
                                        Shields
                                    </p>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-gray-400 uppercase text-sm">Weapons</h3>
                                    <p class="text-white">Martial Weapons, Simple Weapons</p>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-gray-400 uppercase text-sm">Tools</h3>
                                    <p class="text-white">Mason's Tools, Smith's Tools</p>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-gray-400 uppercase text-sm">Languages</h3>
                                    <p class="text-white">Common, Dwarvish, Giant, Goblin, Khuzdul</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div
                        class="bg-gray-800 rounded-lg p-6 shadow-lg border border-gray-700">
                        <div
                            class="flex flex-col sm:flex-row justify-between items-center border-b border-gray-700 pb-3 mb-4">
                            <h2 class="text-2xl font-bold text-yellow-400 flex-shrink-0">Skills</h2>
                            
                            <div id="dice-roller-bar" class="flex justify-center items-center space-x-1 sm:space-x-2 my-2 sm:my-0 sm:mx-4" title="Quick Roll">
                                <button class="dice-button-svg" data-die="4" title="Roll D4">
                                    <svg viewBox="0 0 40 40" width="30" height="30">
                                        <polygon points="20,2 2,38 38,38" fill="#4A5568" stroke="#A0AEC0" stroke-width="2"/>
                                        <text x="20" y="30" font-size="14" fill="white" text-anchor="middle" font-weight="bold" dominant-baseline="middle">D4</text>
                                    </svg>
                                </button>
                                <button class="dice-button-svg" data-die="6" title="Roll D6">
                                    <svg viewBox="0 0 40 40" width="30" height="30">
                                        <rect x="2" y="2" width="36" height="36" rx="6" fill="#4A5568" stroke="#A0AEC0" stroke-width="2"/>
                                        <text x="20" y="22" font-size="14" fill="white" text-anchor="middle" font-weight="bold" dominant-baseline="middle">D6</text>
                                    </svg>
                                </button>
                                <button class="dice-button-svg" data-die="8" title="Roll D8">
                                    <svg viewBox="0 0 40 40" width="30" height="30">
                                        <polygon points="20,2 2,20 20,38 38,20" fill="#4A5568" stroke="#A0AEC0" stroke-width="2"/>
                                        <text x="20" y="22" font-size="14" fill="white" text-anchor="middle" font-weight="bold" dominant-baseline="middle">D8</text>
                                    </svg>
                                </button>
                                <button class="dice-button-svg" data-die="10" title="Roll D10">
                                    <svg viewBox="0 0 40 40" width="30" height="30">
                                        <polygon points="20,2 2,15 8,38 32,38 38,15" fill="#4A5568" stroke="#A0AEC0" stroke-width="2"/>
                                        <text x="20" y="24" font-size="14" fill="white" text-anchor="middle" font-weight="bold" dominant-baseline="middle">D10</text>
                                    </svg>
                                </button>
                                <button class="dice-button-svg" data-die="12" title="Roll D12">
                                    <svg viewBox="0 0 40 40" width="30" height="30">
                                        <polygon points="20,2 5,14 10,38 30,38 35,14" fill="#4A5568" stroke="#A0AEC0" stroke-width="2"/>
                                        <text x="20" y="25" font-size="14" fill="white" text-anchor="middle" font-weight="bold" dominant-baseline="middle">D12</text>
                                    </svg>
                                </button>
                                <button class="dice-button-svg" data-die="20" title="Roll D20">
                                    <svg viewBox="0 0 40 40" width="30" height="30">
                                        <polygon points="20,2 2,12 8,30 32,30 38,12" fill="#4A5568" stroke="#A0AEC0" stroke-width="2"/>
                                        <text x="20" y="22" font-size="14" fill="white" text-anchor="middle" font-weight="bold" dominant-baseline="middle">D20</text>
                                    </svg>
                                </button>
                                <button class="dice-button-svg" data-die="100" title="Roll D100">
                                    <svg viewBox="0 0 40 40" width="30" height="30">
                                        <rect x="2" y="10" width="36" height="20" rx="6" fill="#4A5568" stroke="#A0AEC0" stroke-width="2"/>
                                        <text x="20" y="22" font-size="10" fill="white" text-anchor="middle" font-weight="bold" dominant-baseline="middle">D100</text>
                                    </svg>
                                </button>
                            </div>

                            <div id="skill-roll-display"
                                class="bg-gray-900 border border-gray-700 rounded-md px-4 py-2 text-sm text-yellow-300 font-mono w-full sm:w-auto mt-2 sm:mt-0 min-w-[150px] text-center">
                                Roll Result
                            </div>
                        </div>
                        <ul class="grid grid-cols-1 md:grid-cols-3 gap-x-6 gap-y-2">
                            <li class="skill-item skill-rollable flex justify-between items-center p-3 rounded-lg"
                                data-skill-name="Acrobatics" data-modifier="0" data-roll-type="normal">
                                <span class="font-bold"><span class="mod mr-2">(DEX)</span> Acrobatics</span>
                                <span class="bonus">+0</span>
                            </li>
                            <li class="skill-item skill-rollable flex justify-between items-center p-3 rounded-lg"
                                data-skill-name="Animal Handling" data-modifier="0" data-roll-type="normal">
                                <span class="font-bold"><span class="mod mr-2">(WIS)</span> Animal Handling</span>
                                <span class="bonus">+0</span>
                            </li>
                            <li class="skill-item skill-rollable flex justify-between items-center p-3 rounded-lg"
                                data-skill-name="Arcana" data-modifier="1" data-roll-type="normal">
                                <span class="font-bold"><span class="mod mr-2">(INT)</span> Arcana</span>
                                <span class="bonus">+1</span>
                            </li>
                            <li class="skill-item skill-rollable flex justify-between items-center p-3 rounded-lg"
                                data-skill-name="Athletics" data-modifier="5" data-roll-type="normal">
                                <span class="font-bold"><span class="mod mr-2">(STR)</span> Athletics</span>
                                <span class="bonus">+5</span>
                            </li>
                            <li class="skill-item skill-rollable flex justify-between items-center p-3 rounded-lg"
                                data-skill-name="Deception" data-modifier="-1" data-roll-type="advantage">
                                <span class="flex items-center space-x-2">
                                    <span class="font-bold"><span class="mod mr-2">(CHA)</span> Deception</span>
                                    <span class="adv-icon" title="Advantage">A</span>
                                </span>
                                <span class="bonus">-1</span>
                            </li>
                            <li class="skill-item proficient skill-rollable flex justify-between items-center p-3 rounded-lg"
                                data-skill-name="History" data-modifier="3" data-roll-type="normal">
                                <span class="font-bold"><span class="mod mr-2">(INT)</span> History</span>
                                <span class="bonus">+3</span>
                            </li>
                            <li class="skill-item proficient skill-rollable flex justify-between items-center p-3 rounded-lg"
                                data-skill-name="Insight" data-modifier="2" data-roll-type="normal">
                                <span class="font-bold"><span class="mod mr-2">(WIS)</span> Insight</span>
                                <span class="bonus">+2</span>
                            </li>
                            <li class="skill-item skill-rollable flex justify-between items-center p-3 rounded-lg"
                                data-skill-name="Intimidation" data-modifier="-1" data-roll-type="normal">
                                <span class="font-bold"><span class="mod mr-2">(CHA)</span> Intimidation</span>
                                <span class="bonus">-1</span>
                            </li>
                            <li class="skill-item skill-rollable flex justify-between items-center p-3 rounded-lg"
                                data-skill-name="Investigation" data-modifier="1" data-roll-type="normal">
                                <span class="font-bold"><span class="mod mr-2">(INT)</span> Investigation</span>
                                <span class="bonus">+1</span>
                            </li>
                            <li class="skill-item skill-rollable flex justify-between items-center p-3 rounded-lg"
                                data-skill-name="Medicine" data-modifier="0" data-roll-type="normal">
                                <span class="font-bold"><span class="mod mr-2">(WIS)</span> Medicine</span>
                                <span class="bonus">+0</span>
                            </li>
                            <li class="skill-item skill-rollable flex justify-between items-center p-3 rounded-lg"
                                data-skill-name="Nature" data-modifier="1" data-roll-type="normal">
                                <span class="font-bold"><span class="mod mr-2">(INT)</span> Nature</span>
                                <span class="bonus">+1</span>
                            </li>
                            <li class="skill-item proficient skill-rollable flex justify-between items-center p-3 rounded-lg"
                                data-skill-name="Perception" data-modifier="2" data-roll-type="normal">
                                <span class="font-bold"><span class="mod mr-2">(WIS)</span> Perception</span>
                                <span class="bonus">+2</span>
                            </li>
                            <li class="skill-item skill-rollable flex justify-between items-center p-3 rounded-lg"
                                data-skill-name="Performance" data-modifier="-1" data-roll-type="normal">
                                <span class="font-bold"><span class="mod mr-2">(CHA)</span> Performance</span>
                                <span class="bonus">-1</span>
                            </li>
                            <li class="skill-item skill-rollable flex justify-between items-center p-3 rounded-lg"
                                data-skill-name="Persuasion" data-modifier="-1" data-roll-type="normal">
                                <span class="font-bold"><span class="mod mr-2">(CHA)</span> Persuasion</span>
                                <span class="bonus">-1</span>
                            </li>
                            <li class="skill-item proficient skill-rollable flex justify-between items-center p-3 rounded-lg"
                                data-skill-name="Religion" data-modifier="3" data-roll-type="normal">
                                <span class="font-bold"><span class="mod mr-2">(INT)</span> Religion</span>
                                <span class="bonus">+3</span>
                            </li>
                            <li class="skill-item skill-rollable flex justify-between items-center p-3 rounded-lg"
                                data-skill-name="Sleight of Hand" data-modifier="0" data-roll-type="advantage">
                                <span class="flex items-center space-x-2">
                                    <span class="font-bold"><span class="mod mr-2">(DEX)</span> Sleight of
                                        Hand</span>
                                    <span class="adv-icon" title="Advantage">A</span>
                                </span>
                                <span class="bonus">+0</span>
                            </li>
                            <li class="skill-item skill-rollable flex justify-between items-center p-3 rounded-lg"
                                data-skill-name="Stealth" data-modifier="0" data-roll-type="disadvantage">
                                <span class="flex items-center space-x-2">
                                    <span class="font-bold"><span class="mod mr-2">(DEX)</span> Stealth</span>
                                    <span class="dis-icon" title="Disadvantage">D</span>
                                </span>
                                <span class="bonus">+0</span>
                            </li>
                            <li class="skill-item skill-rollable flex justify-between items-center p-3 rounded-lg"
                                data-skill-name="Survival" data-modifier="0" data-roll-type="normal">
                                <span class="font-bold"><span class="mod mr-2">(WIS)</span> Survival</span>
                                <span class="bonus">+0</span>
                            </li>
                        </ul>
                    </div>

                </div>
                <div id="page-actions" class="page-content hidden">
                    <div
                        class="bg-gray-800 rounded-lg p-6 shadow-lg border border-gray-700 min-h-[400px]">

                        <div
                            class="flex flex-col sm:flex-row justify-between items-center border-b border-gray-700 pb-3 mb-4">
                            <h2 class="text-3xl font-bold text-yellow-400">Actions</h2>
                            <div id="action-roll-display"
                                class="bg-gray-900 border border-gray-700 rounded-md px-4 py-2 text-sm text-yellow-300 font-mono w-full sm:w-auto mt-3 sm:mt-0 text-center sm:text-left min-h-[40px]">
                                </div>
                        </div>

                        <div class="space-y-8">

                            <div>
                                <h3
                                    class="text-2xl font-semibold text-yellow-300 border-b border-gray-600 pb-2 mb-3">
                                    Actions</h3>
                                <div class="space-y-4" id="actions-list">

                                    <div id="unarmed-strike-card"
                                        class="action-card bg-gray-900 rounded-lg p-4 border border-gray-700 shadow-md">
                                        <div
                                            class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-3">
                                            <h4 class="text-xl font-bold text-white">Unarmed Strike</h4>
                                        </div>

                                        <div
                                            class="flex flex-col sm:flex-row items-center gap-4 mb-3 text-center">
                                            <div class="grid grid-cols-3 gap-4 flex-grow">
                                                <div>
                                                    <div class="text-xs font-bold uppercase text-gray-400">Range
                                                    </div>
                                                    <div class="text-lg font-semibold">5ft. <span
                                                            class="text-sm text-gray-400">(Reach)</span></div>
                                                </div>
                                                <div>
                                                    <div class="text-xs font-bold uppercase text-gray-400">Hit / DC
                                                    </div>
                                                    <div class="text-lg font-semibold text-yellow-300">+7</div>
                                                </div>
                                                <div>
                                                    <div class="text-xs font-bold uppercase text-gray-400">Damage
                                                    </div>
                                                    <div class="text-lg font-semibold">6 + 5</div>
                                                </div>
                                            </div>
                                            <div class="flex space-x-2 flex-shrink-0 mt-3 sm:mt-0">
                                                <button class="action-roll-button" data-roll="1d20+7"
                                                    data-roll-name="Unarmed Hit" data-roll-type="hit">Roll
                                                    Hit</button>
                                                <button class="action-roll-button" data-roll="6"
                                                    data-roll-name="Unarmed Dmg" data-roll-type="static"
                                                    data-attack-type="Melee">Show
                                                    Damage</button>
                                            </div>
                                        </div>

                                        <div>
                                            <div class="text-xs font-bold uppercase text-gray-400">Notes</div>
                                            <p class="text-sm text-gray-300">Instead of using a weapon to make a
                                                melee
                                                attack, you can use a punch, kick, head-butt, or similar forceful
                                                blow.
                                                In game terms, this is an Unarmed Strike—a melee attack that
                                                involves you
                                                using your body to damage, grapple, or shove a target within 5 feet
                                                of
                                                you.
                                                Whenever you use your Unarmed Strike, choose one of the following
                                                options for its effect.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div>
                                <h3
                                    class="text-2xl font-semibold text-yellow-300 border-b border-gray-600 pb-2 mb-3">
                                    Bonus Actions</h3>
                                <div class="space-y-4" id="bonus-actions-list">
                                    
                                    <div id="giants-might-card"
                                        class="action-card bg-gray-900 rounded-lg p-4 border border-gray-700 shadow-md">
                                        <div
                                            class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-3">
                                            <h4 class="text-xl font-bold text-white">Giant's Might</h4>
                                            <div class="flex space-x-2 mt-2 sm:mt-0">
                                                <span id="giants-might-status"
                                                    class="text-xs font-semibold bg-gray-700 text-gray-300 px-2 py-1 rounded-full">Inactive</span>
                                            </div>
                                        </div>
                                        
                                        <div class="grid grid-cols-3 gap-4 flex-grow mb-3 text-center">
                                            <div>
                                                <div class="text-xs font-bold uppercase text-gray-400">Action</div>
                                                <div class="text-lg font-semibold">Bonus Action</div>
                                            </div>
                                            <div>
                                                <div class="text-xs font-bold uppercase text-gray-400">Extra Damage</div>
                                                <div class="text-lg font-semibold">1d6</div>
                                            </div>
                                            <div>
                                                <div class="text-xs font-bold uppercase text-gray-400">Duration</div>
                                                <div class="text-lg font-semibold">Manual (1 min/10 Rnds)</div>
                                            </div>
                                        </div>

                                        <div class="mt-4">
                                            <div class="text-xs font-bold uppercase text-gray-400">Rules</div>
                                            <p class="text-sm text-gray-300">
                                                You become Large, gain **advantage on Strength checks/saves**, and once on each of your turns, one attack deals an **extra 1d6 damage** on a hit. <span class="text-gray-500">(TCoE)</span>
                                            </p>
                                        </div>
                                        
                                        <div class="flex justify-between items-center mt-4 pt-4 border-t border-gray-700 space-x-2">
                                            <div class="text-sm font-semibold flex-grow">Uses: <span id="giants-might-uses"
                                                    class="text-yellow-400 font-bold">2</span>/2 (Resets Long Rest)</div>
                                            <button id="deactivate-giants-might"
                                                class="action-roll-button bg-red-600 hover:bg-red-700 border-red-500 text-white disabled:opacity-50 hidden transition duration-200"
                                                title="Manually end the effect">Deactivate</button>
                                            <button id="activate-giants-might"
                                                class="action-roll-button bg-green-600 hover:bg-green-700 border-green-500 text-white disabled:opacity-50 disabled:cursor-not-allowed transition duration-200">Activate</button>
                                        </div>
                                    </div>
                                    <div
                                        class="action-card bg-gray-900 rounded-lg p-4 border border-gray-700 shadow-md">
                                        <div
                                            class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-3">
                                            <h4 class="text-xl font-bold text-white">Second Wind</h4>
                                        </div>

                                        <div class="grid grid-cols-3 gap-4 flex-grow mb-3 text-center">
                                            <div>
                                                <div class="text-xs font-bold uppercase text-gray-400">Action</div>
                                                <div class="text-lg font-semibold">Bonus Action</div>
                                            </div>
                                            <div>
                                                <div class="text-xs font-bold uppercase text-gray-400">Heal</div>
                                                <div class="text-lg font-semibold">1d10+4 HP</div>
                                            </div>
                                            <div>
                                                <div class="text-xs font-bold uppercase text-gray-400">Rest</div>
                                                <div class="text-lg font-semibold">Short/Long</div>
                                            </div>
                                        </div>

                                        <div>
                                            <div class="text-xs font-bold uppercase text-gray-400">Notes</div>
                                            <p class="text-sm text-gray-300">You use a **Bonus Action** to regain Hit Points equal to 1d10 plus your Fighter level (4). If you fail the check for Tactical Mind, this feature's use is not expended.</p>
                                        </div>
										<div class="flex justify-between items-center mt-4 pt-4 border-t border-gray-700 space-x-2">
                                            <div class="text-sm font-semibold flex-grow">Uses: <span id="second-wind-uses"
                                                    class="text-yellow-400 font-bold">1</span>/1 (Resets Short/Long Rest)</div>
                                            <button id="second-wind-button"
                                                class="action-roll-button bg-green-600 hover:bg-green-700 border-green-500 text-white disabled:opacity-50 disabled:cursor-not-allowed transition duration-200">Heal</button>
                                        </div>
                                    </div>
                                    <div id="fire-rune-card"
                                        class="action-card bg-gray-900 rounded-lg p-4 border border-gray-700 shadow-md">
                                        <div
                                            class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-3">
                                            <h4 class="text-xl font-bold text-white">Fire Rune</h4>
                                            <div class="flex space-x-2 mt-2 sm:mt-0">
                                                <span class="text-xs font-semibold bg-gray-700 text-gray-300 px-2 py-1 rounded-full">Passive: Prof in Smith's Tools</span>
                                            </div>
                                        </div>

                                        <div class="grid grid-cols-3 gap-4 flex-grow mb-3 text-center">
                                            <div>
                                                <div class="text-xs font-bold uppercase text-gray-400">Action</div>
                                                <div class="text-lg font-semibold">Bonus Action</div>
                                            </div>
                                            <div>
                                                <div class="text-xs font-bold uppercase text-gray-400">Effect</div>
                                                <div class="text-lg font-semibold">Restrained (DC 15 STR)</div>
                                            </div>
                                            <div>
                                                <div class="text-xs font-bold uppercase text-gray-400">Range</div>
                                                <div class="text-lg font-semibold">60 ft.</div>
                                            </div>
                                        </div>

                                        <div>
                                            <div class="text-xs font-bold uppercase text-gray-400">Notes</div>
                                            <p class="text-sm text-gray-300">
                                                You touch a creature within 60 ft. Target must succeed on a **DC 15 Strength saving throw** or be **Restrained** for 1 minute (or until concentration breaks or you dismiss it). <span class="text-gray-500">(TCoE)</span>
                                            </p>
                                        </div>

                                        <div class="flex justify-between items-center mt-4 pt-4 border-t border-gray-700 space-x-2">
                                            <div class="text-sm font-semibold flex-grow">Uses: <span id="fire-rune-uses"
                                                    class="text-yellow-400 font-bold">1</span>/1 (Resets Short/Long Rest)</div>
                                            <button id="fire-rune-button"
                                                class="action-roll-button bg-purple-600 hover:bg-purple-700 border-purple-500 text-white disabled:opacity-50 disabled:cursor-not-allowed transition duration-200">Activate</button>
                                        </div>
                                    </div>
                                    <div
                                        class="action-card bg-gray-900 rounded-lg p-4 border border-gray-700 shadow-md">
                                        <div
                                            class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-3">
                                            <h4 class="text-xl font-bold text-white">Action Surge</h4>
                                        </div>

                                        <div class="grid grid-cols-3 gap-4 flex-grow mb-3 text-center">
                                            <div>
                                                <div class="text-xs font-bold uppercase text-gray-400">Action</div>
                                                <div class="text-lg font-semibold">None (Free)</div>
                                            </div>
                                            <div>
                                                <div class="text-xs font-bold uppercase text-gray-400">Effect</div>
                                                <div class="text-lg font-semibold">1 Extra Action</div>
                                            </div>
                                            <div>
                                                <div class="text-xs font-bold uppercase text-gray-400">Rest</div>
                                                <div class="text-lg font-semibold">Short/Long</div>
                                            </div>
                                        </div>

                                        <div>
                                            <div class="text-xs font-bold uppercase text-gray-400">Notes</div>
                                            <p class="text-sm text-gray-300">
                                                On your turn, you can take one additional action on top of your regular action and possible bonus action. <span class="text-gray-500">(PHB)</span>
                                            </p>
                                        </div>

                                        <div class="flex justify-between items-center mt-4 pt-4 border-t border-gray-700 space-x-2">
                                            <div class="text-sm font-semibold flex-grow">Uses: <span id="action-surge-uses"
                                                    class="text-yellow-400 font-bold">1</span>/1 (Resets Short/Long Rest)</div>
                                            <button id="action-surge-button"
                                                class="action-roll-button bg-red-600 hover:bg-red-700 border-red-500 text-white disabled:opacity-50 disabled:cursor-not-allowed transition duration-200">Use</button>
                                        </div>
                                    </div>
                                    </div>
                            </div>
                        </div>
                        </div>
                </div>
                <div id="page-features" class="page-content hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="space-y-6">

                            <div class="feature-block">
                                <h2 class="section-title">Racial Features (Mountain Dwarf)</h2>
                                <div class="space-y-4">
                                    <div class="feature-card">
                                        <h3 class="feature-name">Dwarven Resilience</h3>
                                        <p class="feature-description">Advantage on saving throws against poison, and you have resistance against poison damage.</p>
                                    </div>
                                    <div class="feature-card">
                                        <h3 class="feature-name">Dwarven Combat Training</h3>
                                        <p class="feature-description">Proficiency with the battleaxe, handaxe, light hammer, and warhammer.</p>
                                    </div>
                                    <div class="feature-card">
                                        <h3 class="feature-name">Stonecunning</h3>
                                        <p class="feature-description">Whenever you make an Intelligence (History) check related to the origin of stonework, you are considered proficient in the History skill and add double your proficiency bonus to the check. (This applies to the 'History' skill rollable on the main page).</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="feature-block">
                                <h2 class="section-title">Feats & Invocations</h2>
                                <div class="space-y-4">
                                    <div class="feature-card">
                                        <h3 class="feature-name">Great Weapon Fighting</h3>
                                        <p class="feature-description">When you roll a 1 or 2 on a damage die for an attack you make with a melee weapon that you are wielding with two hands, you can reroll the die and must use the new roll, even if the new roll is a 1 or a 2. The weapon must have the two-handed or versatile property to gain this benefit.</p>
                                    </div>
                                    <div class="feature-card">
                                        <h3 class="feature-name">Eldritch Adept (Eyes of the Rune Keeper)</h3>
                                        <p class="feature-description">You can read all writing. (Note: This is an Invocation obtained via the Eldritch Adept feat, granting the ability to comprehend any language written down.)</p>
                                    </div>
                                </div>
                            </div>

                            <div class="feature-block">
                                <h2 class="section-title">Weapon Masteries</h2>
                                <div class="space-y-4">
                                    <div class="feature-card">
                                        <h3 class="feature-name">Warhammer (Push)</h3>
                                        <p class="feature-description">Once per turn, when you hit a creature with this weapon as part of the Attack action, you can force the target to make a DC 15 Strength saving throw. On a failed save, you can push the target 10 feet away from you.</p>
                                    </div>
                                    <div class="feature-card">
                                        <h3 class="feature-name">Greataxe (Cleave)</h3>
                                        <p class="feature-description">Once per turn, when you hit a creature with this weapon as part of the Attack action, and the creature is within 5 feet of a second creature, you can make a free attack roll against the second creature, using the same modifier as the first attack. The damage roll uses a d4.</p>
                                    </div>
                                    <div class="feature-card">
                                        <h3 class="feature-name">Handaxe (Vex)</h3>
                                        <p class="feature-description">When you hit a creature with this weapon, you gain advantage on your next attack roll against that target before the end of your next turn.</p>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div class="space-y-6">
                            <div class="feature-block">
                                <h2 class="section-title">Fighter Class Features</h2>
                                <div class="space-y-4">
                                    <div class="feature-card">
                                        <h3 class="feature-name">Fighting Style: Great Weapon Fighting</h3>
                                        <p class="feature-description">Reroll 1s and 2s on two-handed damage rolls (already covered in Feats section).</p>
                                    </div>
                                    <div class="feature-card">
                                        <h3 class="feature-name">Tactical Mind (Level 2)</h3>
                                        <p class="feature-description">When you attempt to use Second Wind, Action Surge, or Giant's Might, you can make a DC 10 Wisdom saving throw. On a success, the use of the feature is not expended. This check is made by the system automatically.</p>
                                    </div>
                                    <div class="feature-card">
                                        <h3 class="feature-name">Extra Attack (Level 5) - Currently not gained</h3>
                                        <p class="feature-description">The character is currently Fighter Level 4. They gain Extra Attack at Level 5.</p>
                                    </div>
                                </div>
                            </div>

                            <div class="feature-block">
                                <h2 class="section-title">Rune Knight Features (Rune Carver)</h2>
                                <div class="space-y-4">
                                    <div class="feature-card">
                                        <h3 class="feature-name">Cloud Rune</h3>
                                        <p class="feature-description">Passive: Advantage on Dexterity (Sleight of Hand) and Charisma (Deception) checks. <br> Active: When a creature you see within 30 ft. is hit by an attack, you can use your **reaction** to cause that attack to hit a different creature within 30 ft. of the original target (you can choose yourself). <br><span class="text-gray-500 font-semibold">1 Use / Short or Long Rest.</span></p>
                                        <div class="flex justify-between items-center mt-3 pt-3 border-t border-gray-700">
                                            <div class="text-sm font-semibold">Uses: <span id="cloud-rune-uses" class="text-yellow-400 font-bold">1</span>/1</div>
                                            <button id="cloud-rune-button"
                                                class="action-roll-button bg-blue-600 hover:bg-blue-700 border-blue-500 text-white disabled:opacity-50 disabled:cursor-not-allowed text-xs transition duration-200">Use Reaction</button>
                                        </div>
                                    </div>
                                    <div class="feature-card">
                                        <h3 class="feature-name">Fire Rune</h3>
                                        <p class="feature-description">Passive: Proficiency with Smith's Tools. <br> Active: You gain the Fire Rune Bonus Action (Restrain target). <br><span class="text-gray-500 font-semibold">1 Use / Short or Long Rest.</span></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="page-inventory" class="page-content hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

                        <div class="space-y-6">
                            
                            <div class="bg-gray-800 rounded-lg p-6 shadow-lg border border-gray-700">
                                <h2 class="text-2xl font-bold text-yellow-400 border-b border-gray-700 pb-3 mb-4">Coinage</h2>
                                <div class="space-y-3">
                                    <div class="coin-row flex items-center justify-between" data-coin="platinum">
                                        <span class="text-lg font-semibold w-1/4">Platinum (PP)</span>
                                        <input type="number" id="platinum-amount" class="coin-input text-right" value="0" min="0">
                                        <div class="flex space-x-1 ml-4">
                                            <button class="coin-mod-button" data-type="platinum" data-action="minus">-</button>
                                            <button class="coin-mod-button" data-type="platinum" data-action="plus">+</button>
                                        </div>
                                    </div>
                                    <div class="coin-row flex items-center justify-between" data-coin="gold">
                                        <span class="text-lg font-semibold w-1/4">Gold (GP)</span>
                                        <input type="number" id="gold-amount" class="coin-input text-right" value="150" min="0">
                                        <div class="flex space-x-1 ml-4">
                                            <button class="coin-mod-button" data-type="gold" data-action="minus">-</button>
                                            <button class="coin-mod-button" data-type="gold" data-action="plus">+</button>
                                        </div>
                                    </div>
                                    <div class="coin-row flex items-center justify-between" data-coin="electrum">
                                        <span class="text-lg font-semibold w-1/4">Electrum (EP)</span>
                                        <input type="number" id="electrum-amount" class="coin-input text-right" value="0" min="0">
                                        <div class="flex space-x-1 ml-4">
                                            <button class="coin-mod-button" data-type="electrum" data-action="minus">-</button>
                                            <button class="coin-mod-button" data-type="electrum" data-action="plus">+</button>
                                        </div>
                                    </div>
                                    <div class="coin-row flex items-center justify-between" data-coin="silver">
                                        <span class="text-lg font-semibold w-1/4">Silver (SP)</span>
                                        <input type="number" id="silver-amount" class="coin-input text-right" value="250" min="0">
                                        <div class="flex space-x-1 ml-4">
                                            <button class="coin-mod-button" data-type="silver" data-action="minus">-</button>
                                            <button class="coin-mod-button" data-type="silver" data-action="plus">+</button>
                                        </div>
                                    </div>
                                    <div class="coin-row flex items-center justify-between" data-coin="copper">
                                        <span class="text-lg font-semibold w-1/4">Copper (CP)</span>
                                        <input type="number" id="copper-amount" class="coin-input text-right" value="500" min="0">
                                        <div class="flex space-space-x-1 ml-4">
                                            <button class="coin-mod-button" data-type="copper" data-action="minus">-</button>
                                            <button class="coin-mod-button" data-type="copper" data-action="plus">+</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-gray-800 rounded-lg p-6 shadow-lg border border-gray-700">
                                <h2 class="text-2xl font-bold text-yellow-400 border-b border-gray-700 pb-3 mb-4">Add New Weapon</h2>
                                <form id="add-weapon-form" class="space-y-4">
                                    <input type="text" id="weapon-name" placeholder="Weapon Name (e.g., Warhammer)" required class="form-input">
                                    <input type="text" id="weapon-damage-dice" placeholder="Damage (e.g., 1d10, 2d6)" required class="form-input">
                                    <input type="text" id="weapon-damage-type" placeholder="Damage Type (e.g., Bludgeoning)" required class="form-input">
                                    <input type="text" id="weapon-properties" placeholder="Properties (e.g., Heavy, Two-Handed, Reach)" class="form-input">
                                    <select id="weapon-attack-stat" class="form-input">
                                        <option value="STR">Attack Stat: Strength</option>
                                        <option value="DEX">Attack Stat: Dexterity</option>
                                    </select>
                                    <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 rounded-lg transition duration-200">Add Weapon</button>
                                </form>
                            </div>

                            <div class="bg-gray-800 rounded-lg p-6 shadow-lg border border-gray-700">
                                <h2 class="text-2xl font-bold text-yellow-400 border-b border-gray-700 pb-3 mb-4">Add New Armor</h2>
                                <form id="add-armor-form" class="space-y-4">
                                    <input type="text" id="armor-name" placeholder="Armor Name (e.g., Chain Mail)" required class="form-input">
                                    <input type="number" id="armor-base-ac" placeholder="Base AC (e.g., 16)" required class="form-input" min="0">
                                    <input type="text" id="armor-type" placeholder="Type (e.g., Heavy, Medium, Light)" required class="form-input">
                                    <input type="text" id="armor-modifier" placeholder="Modifier (e.g., +DEX, +2 Max)" class="form-input">
                                    <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 rounded-lg transition duration-200">Add Armor</button>
                                </form>
                            </div>
                        </div>

                        <div class="space-y-6">
                            <div class="bg-gray-800 rounded-lg p-6 shadow-lg border border-gray-700">
                                <h2 class="text-2xl font-bold text-yellow-400 border-b border-gray-700 pb-3 mb-4">Equipped Items</h2>
                                <div id="equipped-list" class="space-y-3">
                                    <p class="text-gray-400 italic">No equipment currently equipped.</p>
                                </div>
                            </div>

                            <div class="bg-gray-800 rounded-lg p-6 shadow-lg border border-gray-700">
                                <h2 class="text-2xl font-bold text-yellow-400 border-b border-gray-700 pb-3 mb-4">Other Inventory</h2>
                                <div id="unequipped-list" class="space-y-3">
                                    <p class="text-gray-400 italic">Inventory is loading...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="page-background" class="page-content hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div class="bg-gray-800 rounded-lg p-6 shadow-lg border border-gray-700">
                            <h2 class="text-2xl font-bold text-yellow-400 border-b border-gray-700 pb-3 mb-4">Characteristics</h2>
                            <div class="space-y-3">
                                <div class="char-detail-row">
                                    <span class="font-semibold text-gray-400 w-1/3">Alignment:</span>
                                    <span class="text-white w-2/3">Lawful Good</span>
                                </div>
                                <div class="char-detail-row">
                                    <span class="font-semibold text-gray-400 w-1/3">Gender:</span>
                                    <span class="text-white w-2/3">Male</span>
                                </div>
                                <div class="char-detail-row">
                                    <span class="font-semibold text-gray-400 w-1/3">Age:</span>
                                    <span class="text-white w-2/3">135</span>
                                </div>
                                <div class="char-detail-row">
                                    <span class="font-semibold text-gray-400 w-1/3">Height:</span>
                                    <span class="text-white w-2/3">4' 6"</span>
                                </div>
                                <div class="char-detail-row">
                                    <span class="font-semibold text-gray-400 w-1/3">Weight:</span>
                                    <span class="text-white w-2/3">180 lbs</span>
                                </div>
                                <div class="char-detail-row">
                                    <span class="font-semibold text-gray-400 w-1/3">Hair:</span>
                                    <span class="text-white w-2/3">Black, Braided</span>
                                </div>
                                <div class="char-detail-row">
                                    <span class="font-semibold text-gray-400 w-1/3">Eyes:</span>
                                    <span class="text-white w-2/3">Brown</span>
                                </div>
                                <div class="char-detail-row">
                                    <span class="font-semibold text-gray-400 w-1/3">Skin:</span>
                                    <span class="text-white w-2/3">Tanned, Weathered</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="lg:col-span-2 bg-gray-800 rounded-lg p-6 shadow-lg border border-gray-700">
                            <h2 class="text-2xl font-bold text-yellow-400 border-b border-gray-700 pb-3 mb-4">Origin Story</h2>
                            <textarea id="origin-story-textarea" rows="15" class="w-full h-full p-3 bg-gray-900 border border-gray-700 rounded-lg text-gray-200 focus:ring-yellow-500 focus:border-yellow-500 placeholder-gray-500"></textarea>
                        </div>
                    </div>
                </div>
                <div id="page-notes" class="page-content hidden">
                    <div class="bg-gray-800 rounded-lg p-6 shadow-lg border border-gray-700">
                        <h2 class="text-2xl font-bold text-yellow-400 border-b border-gray-700 pb-3 mb-4">Campaign Notes</h2>
                        <textarea id="notes-textarea" rows="20" class="w-full h-full p-3 bg-gray-900 border border-gray-700 rounded-lg text-gray-200 focus:ring-yellow-500 focus:border-yellow-500 placeholder-gray-500"></textarea>
                    </div>
                </div>
                </div>
            </div>
    </div>
    <div id="persistence-status" class="fixed bottom-0 left-0 w-full bg-gray-900 text-center p-2 text-sm border-t border-gray-700 z-50">
        <span id="persistence-message" class="text-gray-400">Loading persistence status...</span>
    </div>

    <script type="module" src="./app.js"></script>
</body>

</html>